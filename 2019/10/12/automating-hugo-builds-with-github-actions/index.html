<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.58.3"><title>HugoのビルドをGithub Actionで自動化する - 1ミリもわからん</title><meta property=og:title content="HugoのビルドをGithub Actionで自動化する - 1ミリもわからん"><link href=https://raahii.github.io/favicon.ico rel=icon type=image/x-icon><link rel=icon href=https://raahii.github.io/images/favicon.ico type=image/x-icon><link rel=stylesheet href=https://raahii.github.io/css/main.css media=all><link rel=stylesheet href="//fonts.googleapis.com/css?family=Merriweather:400|Lato:400,400italic,700"></head><body><div class=wrapper><header class=header><nav class=nav><a href=https://raahii.github.io/ class=nav-logo><img src=https://raahii.github.io/images/bird.svg width=45 height=45 alt=Logo><p class=nav-title>1ミリもわからん</p></a><ul class=nav-links><li><a href=/tags/ target=_blank>Tags</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/raahii target=_blank>GitHub</a></li><li><a href=https://twitter.com/raahiiy target=_blank>Twitter</a></li></ul></nav></header><main class=content role=main><article class=article><h1 class=article-title>HugoのビルドをGithub Actionで自動化する</h1><span class=article-date>October 12, 2019</span>
<span class=article-duration>1 min read</span><div class=article-content><p>台風が来て家に籠もるしかなくなったので，ブログのデザインをかえつつ，HugoのビルドをGithub Actionsで自動化した．公開にはGithub Pagesを使っている．</p><p><a class=dont-hightlight href=https://github.com/raahii/raahii.github.io><img src=https://gh-card.dev/repos/raahii/raahii.github.io.svg></a></p><p>基本的に</p><blockquote><p><a href=https://qiita.com/peaceiris/items/d401f2e5724fdcb0759d target=_blank>GitHub Actions による GitHub Pages への自動デプロイ</a></p></blockquote><p>のとおりにWorkflowを作ればできます．記事書いてくださった方自身が次のようなモジュールを公開されてるので神．</p><ul><li><a href=https://github.com/peaceiris/actions-gh-pages target=_blank>peaceiris/actions-gh-pages</a></li><li><a href=https://github.com/peaceiris/actions-hugo target=_blank>peaceiris/actions-hugo</a></li></ul><p>あえて注意点を上げるとすると，公開に <code>&lt;username&gt;.github.io</code> の直下？を使っている場合．このURLを使うには，名前を <code>&lt;username&gt;.github.io</code> としたリポジトリでGithub Pagesを設定する必要があるが，公開するソースは<code>master</code> ブランチのルートでなければならない（本来であれば他のブランチや特定のディレクトリを指定できる）．よって先の記事のような <code>gh-pages</code> ブランチにプッシュするやり方では実現できない．</p><p>そこで今回は，そもそも <code>source</code> ブランチをデフォルトブランチとすることにして，workflowでビルドしたものを <code>master</code> にプッシュするように変更した．</p><ul><li><a href=https://github.com/raahii/raahii.github.io/blob/source/.github/workflows/gh-pages.yml target=_blank>raahii.github.io/gh-pages.yml - GitHub</a></li></ul><p>最近，研究に使ってるリポジトリにもGithub Actionsを設定したが，Dockerfileを使えば大体のことはできるし，直感的で使いやすい印象．ただドキュメントはあまり充実してないので複雑なことはできないかもしれない（以前もDockerfileのbuildのキャッシングがまだできないようだった）．今後も積極的に使っていこうと思う．</p><p>最後に，これは余談ですが，今回採用した<a href=https://themes.gohugo.io/hugo-lithium-theme/ target=_blank>Lithium</a>というテーマにコードブロックのデザインが無かったので足してみました．Hugoのバージョン0.28以降には<a href=https://github.com/alecthomas/chroma target=_blank>Chroma</a>というGo製のシンタックスハイライターがついていて，設定ファイルに書き足すだけで色付けできるので便利ですね（今回はそもそも コードブロックの要素自体にcssが当たってなかったので外枠のデザインは作りました）．Hugoも相変わらずとっても良きです．</p><ul><li><a href=https://gohugo.io/content-management/syntax-highlighting/#generate-syntax-highlighter-css target=_blank>Syntax Highlighting | Hugo</a></li></ul></div></article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"raahii"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><h3>こちらの記事もどうぞ</h3><ul><li><a href=/2019/04/07/permutations-in-go/>Goで順列（permutation）を実装する</a></li><li><a href=/2019/04/03/abc122/>ABC122 D - We Like AGC</a></li><li><a href=/2019/03/23/divisor-enumeration/>約数の全列挙の高速化</a></li><li><a href=/2019/03/12/union-find/>Union FindのメモとGoによる実装</a></li><li><a href=/2019/10/13/read-file-faster-golang/>なぜioutil.ReadFileはioutil.ReadAllより速いか</a></li></ul></main><footer class=footer><ul class=footer-links><li><a href=https://gohugo.io/ class=footer-links-kudos>Made with <img src=https://raahii.github.io/images/hugo-logo.png width=22 height=22></a></li></ul></footer></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-86522604-4','auto');ga('send','pageview');}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css integrity=sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js integrity=sha384-2BKqo+exmr9su6dir+qCw08N2ZKRucY4PrGQPPWU1A7FtlCGjmEGFqXCv5nyM5Ij crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"$",right:"$",display:false}]});});</script></body></html>