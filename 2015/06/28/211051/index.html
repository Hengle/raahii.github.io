<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.58.3"><title>Pythonの日本語文字列 - 1ミリもわからん</title><meta property=og:title content="Pythonの日本語文字列 - 1ミリもわからん"><link href=https://raahii.github.io/favicon.ico rel=icon type=image/x-icon><meta property=description content="「研究者流コーディングの極意」を読んで、なんだかためになりそうだし、面白そうだし、ということで言語処理100本ノックを始めてみました。そして2つ目で詰まった(早い)。 使っている言語はPythonで、使い始めたばかりなのですが、そもそもプ"><link rel=icon href=https://raahii.github.io/images/favicon.ico type=image/x-icon><link rel=stylesheet href=https://raahii.github.io/css/main.css media=all><link rel=stylesheet href="//fonts.googleapis.com/css?family=Merriweather:400|Lato:400,400italic,700"></head><body><div class=wrapper><header class=header><nav class=nav><a href=https://raahii.github.io/ class=nav-logo><img src=https://raahii.github.io/images/bird.svg width=45 height=45 alt=Logo><p class=nav-title>1ミリもわからん</p></a><ul class=nav-links><li><a href=/about/>About</a></li><li><a href=https://github.com/raahii target=_blank>GitHub</a></li><li><a href=https://twitter.com/raahiiy target=_blank>Twitter</a></li></ul></nav></header><main class=content role=main><article class=article><h1 class=article-title>Pythonの日本語文字列</h1><span class=article-date>June 28, 2015</span>
<span class=article-duration>1 min read</span><div class=article-content><p><body><p>「<a href=http://www.chokkan.org/publication/coding-for-researchers.pdf>研究者流コーディングの極意</a>」を読んで、なんだかためになりそうだし、面白そうだし、ということで言語処理100本ノックを始めてみました。そして2つ目で詰まった(早い)。<br>使っている言語は<a class=keyword href=http://d.hatena.ne.jp/keyword/Python>Python</a>で、使い始めたばかりなのですが、そもそもプログラミングがダメダメです。</p><p>まず、その問題ですが、</p></p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>&lt;blockquote&gt;
    &lt;p&gt;01. 「パタトクカシーー」&lt;br&gt;</pre></div><p>「パタトクカシーー」という文字列の1,3,5,7文字目を取り出して連結した文字列を得よ．</p></p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>&lt;/blockquote&gt;</pre></div><p><p>です。</p><p>まず私が考えたのは、こんな感じです。なんの疑問もなくこれでいけるだろうと思ってました笑。</p><pre class="code lang-python" data-lang=python data-unlink> string=&ldquo;パタトクカシーー&rdquo;
rev=&ldquo;&rdquo;
for i in [1,3,5,7]:
   　rev+=string[i]
print rev</p>

<p></pre><p>一方結果は、</p><pre class=code data-lang data-unlink> % python 01.「パタトクカシーー」.py
�㿃
</pre><p>なんか文字化けしてる…。<br>それもそのはずで、「パタトクカシーー」は全て全角文字なのでひとひねり必要です。一般に半角は1byte、全角は2byteに符号化されているので、配列のお部屋と1:1対応にならないのが原因。<br>そして<a class=keyword href=http://d.hatena.ne.jp/keyword/Python>Python</a>の場合、通常のstr型の全角文字は3byteに符号化されている（お部屋3つに対応している）みたいです。</p><pre class=code data-lang data-unlink> &gt;&gt;&gt; &lsquo;あ&rsquo;[0]
&lsquo;\xe3&rsquo;
&gt;&gt;&gt; &lsquo;あ&rsquo;[1]
&lsquo;\x81&rsquo;
&gt;&gt;&gt; &lsquo;あ&rsquo;[2]
&lsquo;\x82&rsquo;
&gt;&gt;&gt; &lsquo;あ&rsquo;[3]
Traceback (most recent call last):
  File &ldquo;&lt;stdin&gt;&rdquo;, line 1, in &lt;module&gt;
IndexError: string index out of range
</pre><p>この記事が参考になりました。<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Fyubessy%2Fitems%2F9e13af05a295bbb59c25" title="Python2のstr/unicodeとencode/decode - Qiita" class="embed-card embed-webcard" scrolling=no frameborder=0 style="display:block;width:100%;height:155px;max-width:500px;margin:10px 0"></iframe><cite class=hatena-citation><a href=http://qiita.com/yubessy/items/9e13af05a295bbb59c25>qiita.com</a></cite></p><p>これを知ったうえで愚直に書き換えると、</p><pre class="code lang-python" data-lang=python data-unlink> string=&ldquo;パタトクカシーー&rdquo;
rev=&ldquo;&rdquo;
for i in [1,3,5,7]:
    for j in range(3):#全角なので
        rev+=string[3*i+j]
print rev</p>

<p></pre><pre class=code data-lang data-unlink> % python 01.「パタトクカシーー」.py
タクシー
</pre><p>うまくいったー！！</p><p>また、<a class=keyword href=http://d.hatena.ne.jp/keyword/Python>Python</a>には全角文字でもお部屋と1:1対応してくれる便利な型があります。「<a class=keyword href=http://d.hatena.ne.jp/keyword/%A5%E6%A5%CB%A5%B3%A1%BC%A5%C9>ユニコード</a>文字列」です。</p><pre class="code lang-python" data-lang=python data-unlink> string=u&rdquo;パタトクカシーー&rdquo;
rev=&ldquo;&rdquo;
for i in [1,3,5,7]:
    rev+=string[i]
print rev</p>

<p></pre><p>これでもできます。便利。<br>超基礎的な文字列処理ですが、<a class=keyword href=http://d.hatena.ne.jp/keyword/Python>Python</a>で鍛え直します…。</p></body></p></div></article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"raahii"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer class=footer><ul class=footer-links><li><a href=https://gohugo.io/ class=footer-links-kudos>Made with <img src=https://raahii.github.io/images/hugo-logo.png width=22 height=22></a></li></ul></footer></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-86522604-4','auto');ga('send','pageview');}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css integrity=sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js integrity=sha384-2BKqo+exmr9su6dir+qCw08N2ZKRucY4PrGQPPWU1A7FtlCGjmEGFqXCv5nyM5Ij crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"$",right:"$",display:false}]});});</script></body></html>